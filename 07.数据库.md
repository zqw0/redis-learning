## 介绍
本章将对redis服务器的数据库实现进行详细介绍，说明服务器保存数据库的方法，客户端切换数据库的方法，数据库保存键值对的方法，以及针对数据库的添加、删除、查看、更新操作的实现方法等。  
## 服务器中的数据库  
redis服务器的结构体如下。redis服务器将所有数据库都保存在这里。  
```
struct redisServer{
          //...
          //一个数组，保存着服务器中的所有数据库
          redisDB *db;
          //初始化服务器时，程序会根据服务器状态的dbnum属性来决定应该创建多少个数据库。（一般默认情况下为16个）
          int dbnum;
};
```
## 切换数据库  
**默认情况下，redis客户端的目标数据库为0号数据库，但客户端可以通过执行SELECT命令来切换目标数据库**。如下示例演示了客户端在0号数据库设置并读取键msg，之后切换2号数据库并执行类似操作的过程：  
```
redis>  SET msg "hello  world"
OK

redis>  GET msg
"hello  world"

redis>  SELECT  2
OK

redis[2]> GET msg
(nil)
```
在服务器内部，客户端状态redisClient结构的db属性记录了客户端当前的目标数据库，这个属性是一个指向redisDB结构的指针：
```
typedef struct redisClient{
        //..
        //记录客户端当前正在使用的数据库。
        redisDB *db;
        //...
}redisClient;
```
## 数据库键空间  

